{"version":3,"sources":["../../src/server/app.js"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["var express = require('express');\nvar uuid = require('node-uuid');\nvar app = express();\nvar http = require('http').Server(app);\nvar io = require('socket.io')(http);\nvar pendingPlayers = [];\n\napp.use(function (req, res, next) {\n  console.log(\"New request to \", req.path);\n  next();\n});\n\napp.use(express.static('build'));\n\nio.on('connection', function (socket) {\n  console.log('connection established', socket.id);\n  socket.emit(\"connected\", {});\n\n  socket.on('disconnect', function () {\n    console.log('connection lost');\n  });\n\n  socket.on('i_want_to_play_right_meow', function handleLobby() {\n    console.log(socket.id, \"wants to play\");\n    pendingPlayers.push(socket);\n\n    if (pendingPlayers.length >= 2) {\n      var playersForGame = pendingPlayers.splice(0,2);\n      var game = new Game(playersForGame);\n\n      // Subscribe the selected players to the new game room.\n      playersForGame[0].join(game.id);\n      playersForGame[1].join(game.id);\n\n      io.to(game.id).emit(\"game_start\", game );\n\n      socket.on('game_update', function (move) {\n        console.log(move);\n        io.to(game.id).emit('game_update', game);\n      });\n    }\n  });\n});\n\nfunction Game(players) {\n  return {\n    id: uuid.v4(),\n    currentPlayer: \"X\",\n    nextBoard: false,\n    players: [\n      { id: players[0].id, symbol: \"X\" },\n      { id: players[1].id, symbol: \"O\" }\n    ],\n    boardState: {\n      'topLeft': {},\n      'topCenter': {},\n      'topRight': {},\n      'middleLeft': {},\n      'middleCenter': {},\n      'middleRight': {},\n      'bottomLeft': {},\n      'bottomCenter': {},\n      'bottomRight': {},\n      'catsCount': 0\n    }\n  };\n}\n\n\nhttp.listen(3000, function () {\n  console.log('Example app running on port 3000!');\n});\n"]}